---
title: SABER MVP
author: Ben Miroglio
date: 'Last Updated: `r format(Sys.time(), "%B %d, %Y")`'
output:
  html_document:
    theme: cosmo
---

```{R, include=F}
knitr::opts_chunk$set(echo=F, warning=F, message=F)
source("etl.R")
source("funcs.R")
boot <- fread("cat ./data/boot.csv")[,.(Metric=variable, change=change)]
result <- fread("cat ./data/result.csv")[,.(Metric=variable, `Percent Change`=change)]
summary <- create_summary(boot, result, 0.01)
exp_melted <- melt(exp_branch, id.vars = c('experiment_branch', 'days_since_enrollment'))
```

# {.tabset}

This is an experiment report for the ``r spec$experiment_slug`` study.

## Executive Summary

_Paste chunks from the Detailed Summary Section here, and add minimal prose..._

### TL;DR

Key Takeaways:

* Takeaway 1

* Takeaway 2

* ...


### Introduction

What was this experiment about?
(Copy and pasting from experimenter is fine to do here, add any other relevent info if necessary)


### Data

This experiment launched on `r spec$start`
and ended on `r spec$end`.
It targeted `r spec$target_percent` of Firefox users
on the `r spec$channels` channel(s) with
version(s) `r spec$versions`.

_add any additional filters here_


`r format(nrow(exp_client), big.mark = ",")` users were enrolled in this experiment.


### Results

### Conclusion

## Detailed Summary

_Add any prose to explain caveats or unexpected behavior here_


Number of clients in each branch over days enrolled

```{r}
plot_enrollment_by_day()
```


Percent Changes in each metric

```{r}
render_pct_change_table(metrics="*")
```

Percent changes visualized

```{r, echo=FALSE, fig.height=6.2, fig.width=5, warning=F}
plot_pct_changes(metrics="*")
```


Metrics over time (days enrolled)

```{r, fig.width=20, fig.height=8, warning=F}
plot_metrics_by_day()
```


Queries issued

Aggregates by day, branch:

```{r}
cat(sql_by_branch)
```


Aggregates by client, branch

```{r}
cat(sql_by_client)
```









