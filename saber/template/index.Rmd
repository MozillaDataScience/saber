---
title: '`r rjson::fromJSON(file="report.json")$title`'
author: '`r rjson::fromJSON(file="report.json")$author` <<`r rjson::fromJSON(file="report.json")$email`>>'
date: '`r rjson::fromJSON(file="report.json")$publish_date`'
output:
  html_document:
    theme: cosmo
    toc: false
---
```{r setup global_options, include=FALSE, echo=FALSE, paged.print=TRUE}
knitr::opts_chunk$set(fig.width=12, fig.height=8, fig.path='images/',
                      echo=FALSE, warning=FALSE, message=FALSE)
source("helper_funcs.R")
helper_funcs.ipak(c("tidyverse", "DT", "htmltools"))
```

```{r}
report <- rjson::fromJSON(file="report.json")
```

```{r echo=FALSE}
df <- read_csv(paste0('data/', report["last_date_full_data"],'_', report['experiment_slug'], '.csv'))
branches <- df %>% pull(branch) %>% unique()
metrics  <- df %>% pull(metric) %>% unique()
```

Status: <*automated draft*>

# Motivation
This is an experiment report for the ``r report$experiment_slug`` study.

__DS to complete__

# Executive Summary

__DS to complete__


# {.tabset}

## Design
<p align="center"><img src=design.png width=600px alt='experiment_mockup'></p>


## Methods
### Supporting Assets
- [Experimenter](`r paste0('https://experimenter.services.mozilla.com/experiments/', report['experimenter_name'])`)

### Terminology

For this study, we used the following terms for our analysis:

__DS to complete__

### Data Assets
This experiment launched on `r report$start_date`, and targeted `r report$target_percent` of Firefox Users on version `r report$version`. These users were randomly sampled and assigned one of the `r length(branches)` experimental conditions: `r branches`.

We evaluated `r length(metrics)` measures of interactions in this study on a `per user` basis:

```{r}
knitr::kable(unique(df['metric']), col.names='Metrics')
```


```{r}
summary_list <- helper_funcs.create_summary_list(df)
```

## Summary Plots
```{r}
lapply(summary_list, helper_funcs.create_plot)
```

## Decile Plots

```{r}
lapply(summary_list, helper_funcs.plot_pct_changes_decile)
```

## Tables

```{r}
tagList(lapply(summary_list, helper_funcs.create_table))
```
